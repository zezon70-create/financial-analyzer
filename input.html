<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title data-translate-key="pageTitle">إدخال ميزان المراجعة — المحلل المالي</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet"/>
    
    <link rel="stylesheet" href="css/style.css">
</head>
<body data-theme="light">

    <div class="watermark" aria-hidden="true"><img src="assets/logo.png" alt="logo" id="wmLogo"></div>
    <div class="toast-area" id="toastArea" role="status" aria-live="polite"></div>

    <header class="site-header-adv">
        <div class="brand">
            <img src="assets/logo.png" alt="logo">
            <div>
                <div class="title" data-translate-key="brandTitle">إدخال ميزان المراجعة</div>
                <div class="small-muted-light" data-translate-key="brandSub">إدخال يدوي أو رفع ملف</div>
            </div>
        </div>
        <nav class="controls" role="navigation">
            <a class="btn btn-sm btn-outline-light" href="index.html" data-translate-key="navHome" title="الرئيسية"><i class="bi bi-house"></i></a>
            <select id="languageSelect" class="form-select form-select-sm"></select>
            <div class="form-check form-switch mb-0">
                <input class="form-check-input" id="darkModeToggle" type="checkbox" role="switch">
            </div>
        </nav>
    </header>

    <main class="container-main" role="main" id="mainArea">
        <section class="ribbon" aria-labelledby="ribbonTitle">
            <div class="hero-row">
                <div class="hero-left">
                    <h3 id="ribbonTitle"><span data-translate-key="welcome">مرحبًا بك في</span> <span class="brand-gradient">إدخال البيانات اليدوي</span></h3>
                    <p class="small-muted mt-2" data-translate-key="ribbonDesc">أدخل بيانات ميزان المراجعة يدويًا أو ارفع ملف Excel. لا تنس حفظ عملك.</p>
                    
                    <div class="mt-3 d-flex gap-2 flex-wrap" role="toolbar" aria-label="actions">
                        <button id="addRowBtn" class="btn btn-glow btn-sm"><i class="bi bi-plus-lg"></i> <span data-translate-key="add">إضافة صف</span></button>
                        <button id="saveBtn" class="btn btn-outline-info btn-sm"><i class="bi bi-save"></i> <span data-translate-key="save">حفظ العمل الحالي</span></button>
                        <button id="clearBtn" class="btn btn-outline-danger btn-sm"><i class="bi bi-trash"></i> <span data-translate-key="clear">مسح الكل</span></button>
                        <a href="report.html" id="goReportBtn" class="btn btn-success btn-sm ms-auto"><i class="bi bi-receipt"></i> <span data-translate-key="report">الذهاب للتقارير</span></a>
                    </div>

                    <div class="mt-3 p-3 rounded" style="background: rgba(13, 110, 253, 0.05);">
                        <label for="saveAsName" class="form-label fw-bold small" data-translate-key="saveForComparison">حفظ نسخة للمقارنات</label>
                        <div class="input-group input-group-sm">
                            <input type="text" id="saveAsName" class="form-control" placeholder="مثال: بيانات 2024">
                            <button id="saveAsBtn" class="btn btn-info"><i class="bi bi-archive-fill"></i> <span data-translate-key="saveAs">حفظ باسم</span></button>
                        </div>
                    </div>
                </div>

                <div class="hero-right">
                    <label class="form-label fw-bold mb-1" data-translate-key="uploadLabel">أو قم برفع ملف (CSV / XLSX)</label>
                    <input type="file" id="fileInput" class="form-control input-sm" accept=".csv,.xlsx"/>
                    <div class="small-muted mt-2" data-translate-key="uploadHint">سيتم استبدال البيانات الحالية ببيانات الملف.</div>
                </div>
            </div>
        </section>

        <section id="kpiSection" class="mb-3">
            <div class="kpi-row" id="kpiRow"></div>
        </section>

        <section class="card-surface">
            <h6 data-translate-key="tableTitle">ميزان المراجعة — البيانات</h6>
            <div class="table-responsive mt-2">
                <table id="trialTable" class="table table-borderless align-middle">
                    <thead></thead>
                    <tbody id="tbBody"></tbody>
                </table>
            </div>
            <div id="validationResult" class="mt-3"></div>
        </section>

        <footer class="text-center py-3 small" data-translate-key="footer">© 2025 المحلل المالي — جميع الحقوق محفوظة</footer>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="js/input-app.js"></script>
</body>
</html>