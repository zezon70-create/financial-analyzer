<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>المحلل المالي المحترف | Professional Financial Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    /* ====== Reset & Base ====== */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo', sans-serif; }
    body { background: #f0f2f5; color:#333; line-height:1.6; }
    a { text-decoration:none; color:inherit; }

    /* ====== Header ====== */
    header {
        position:fixed; top:0; left:0; width:100%; height:60px;
        background: rgba(255,255,255,0.8); backdrop-filter:blur(10px);
        display:flex; align-items:center; justify-content:space-between;
        padding:0 20px; z-index:1000; box-shadow:0 2px 8px rgba(0,0,0,0.1);
    }
    header h1 { font-size:1.2rem; font-weight:700; }
    nav a { margin-left:20px; font-weight:600; transition:0.3s; }
    nav a:hover { color:#007bff; }

    /* ====== Main Container ====== */
    main { padding:80px 20px 40px; max-width:1200px; margin:0 auto; }

    /* ====== Cards ====== */
    .cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-bottom:30px; }
    .card {
        background: rgba(255,255,255,0.8); backdrop-filter:blur(8px);
        padding:20px; border-radius:15px; box-shadow:0 4px 15px rgba(0,0,0,0.1);
        transition:0.3s; text-align:center;
    }
    .card:hover { transform:translateY(-5px); box-shadow:0 6px 20px rgba(0,0,0,0.15); }
    .card h2 { font-size:1rem; font-weight:600; margin-bottom:10px; }
    .card p { font-size:1.5rem; font-weight:700; color:#007bff; }

    /* ====== Charts ====== */
    .charts { display:grid; grid-template-columns:1fr; gap:30px; margin-bottom:30px; }
    canvas { background:#fff; border-radius:15px; padding:10px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }

    /* ====== Tables ====== */
    table { width:100%; border-collapse:collapse; background:#fff; border-radius:10px; overflow:hidden; box-shadow:0 4px 15px rgba(0,0,0,0.1); margin-bottom:30px; }
    th, td { padding:12px 15px; text-align:center; }
    th { background:#007bff; color:#fff; font-weight:600; }
    tr:nth-child(even) { background:#f7f7f7; }
    tr:hover { background:#e0f0ff; }

    /* ====== Buttons ====== */
    .btn { display:inline-block; padding:10px 20px; background:#007bff; color:#fff; border:none; border-radius:8px; cursor:pointer; font-weight:600; transition:0.3s; }
    .btn:hover { background:#0056b3; }

    /* ====== Responsive ====== */
    @media(max-width:768px) {
        .cards { grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); }
        header { flex-direction:column; height:auto; padding:10px; }
        nav a { margin:5px 0; }
    }
</style>
</head>
<body>

<header>
    <h1>المحلل المالي المحترف</h1>
    <nav>
        <a href="#">الرئيسية</a>
        <a href="#">التقارير</a>
        <a href="#">الإعدادات</a>
    </nav>
</header>

<main>

    <!-- ====== KPI Cards ====== -->
    <div class="cards">
        <div class="card">
            <h2>صافي الربح</h2>
            <p id="netProfit">0</p>
        </div>
        <div class="card">
            <h2>العائد على الأصول ROA</h2>
            <p id="roa">0%</p>
        </div>
        <div class="card">
            <h2>العائد على حقوق الملكية ROE</h2>
            <p id="roe">0%</p>
        </div>
        <div class="card">
            <h2>السيولة الحالية</h2>
            <p id="currentRatio">0</p>
        </div>
    </div>

    <!-- ====== Charts ====== -->
    <div class="charts">
        <canvas id="profitChart" height="150"></canvas>
        <canvas id="revenueChart" height="150"></canvas>
    </div>

    <!-- ====== Financial Table ====== -->
    <table>
        <thead>
            <tr>
                <th>البند</th>
                <th>القيمة الحالية</th>
                <th>القيمة السابقة</th>
                <th>التغير</th>
            </tr>
        </thead>
        <tbody id="financialTable">
            <!-- Data will be injected dynamically -->
        </tbody>
    </table>

    <!-- ====== PDF Export Button ====== -->
    <button class="btn" onclick="exportPDF()">تصدير التقرير PDF</button>

</main>

<script>
/* ====== Sample Data ====== */
const financialData = [
    {item:"الإيرادات", current:120000, previous:100000},
    {item:"المصاريف", current:50000, previous:45000},
    {item:"صافي الربح", current:70000, previous:55000},
    {item:"الأصول", current:300000, previous:280000},
    {item:"حقوق الملكية", current:200000, previous:180000},
    {item:"السيولة الحالية", current:150000, previous:130000},
];

/* ====== Populate Table ====== */
const tableBody = document.getElementById("financialTable");
financialData.forEach(row => {
    const tr = document.createElement("tr");
    const change = row.current - row.previous;
    tr.innerHTML = `
        <td>${row.item}</td>
        <td>${row.current.toLocaleString()}</td>
        <td>${row.previous.toLocaleString()}</td>
        <td style="color:${change>=0?'green':'red'}">${change.toLocaleString()}</td>
    `;
    tableBody.appendChild(tr);
});

/* ====== Populate KPIs ====== */
document.getElementById("netProfit").innerText = financialData[2].current.toLocaleString();
document.getElementById("roa").innerText = ((financialData[2].current / financialData[3].current) * 100).toFixed(2) + "%";
document.getElementById("roe").innerText = ((financialData[2].current / financialData[4].current) * 100).toFixed(2) + "%";
document.getElementById("currentRatio").innerText = (financialData[5].current / financialData[3].current).toFixed(2);

/* ====== Charts ====== */
const profitChart = new Chart(document.getElementById("profitChart"), {
    type:'line',
    data:{
        labels:financialData.map(d=>d.item),
        datasets:[{
            label:'القيمة الحالية',
            data:financialData.map(d=>d.current),
            borderColor:'#007bff',
            backgroundColor:'rgba(0,123,255,0.2)',
            fill:true,
            tension:0.3
        }]
    },
    options:{ responsive:true, plugins:{ legend:{ display:true } } }
});

const revenueChart = new Chart(document.getElementById("revenueChart"), {
    type:'bar',
    data:{
        labels:financialData.map(d=>d.item),
        datasets:[{
            label:'القيمة السابقة',
            data:financialData.map(d=>d.previous),
            backgroundColor:'rgba(255,193,7,0.7)',
            borderColor:'#ffc107',
            borderWidth:1
        }]
    },
    options:{ responsive:true, plugins:{ legend:{ display:true } } }
});

/* ====== PDF Export ====== */
function exportPDF(){
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text("التقرير المالي المحترف", 105, 20, null, null, "center");
    doc.setFontSize(12);
    doc.text(`التاريخ: ${new Date().toLocaleDateString()}`, 105, 30, null, null, "center");

    // Add KPIs
    let y = 45;
    doc.text(`صافي الربح: ${financialData[2].current.toLocaleString()}`, 20, y);
    doc.text(`ROA: ${((financialData[2].current / financialData[3].current) * 100).toFixed(2)}%`, 20, y+10);
    doc.text(`ROE: ${((financialData[2].current / financialData[4].current) * 100).toFixed(2)}%`, 20, y+20);
    doc.text(`السيولة الحالية: ${(financialData[5].current / financialData[3].current).toFixed(2)}`, 20, y+30);

    doc.save("Financial_Report.pdf");
}
</script>

</body>
</html>
