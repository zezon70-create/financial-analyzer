<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة القيادة الذكية | Financial Analyzer Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --bg: #0e1013;
  --card: #1b1e24;
  --text: #f0f0f0;
  --accent: #00bcd4;
}
body {
  font-family: 'Cairo', sans-serif;
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
}
header {
  background: linear-gradient(90deg, #00bcd4, #006064);
  padding: 15px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: #fff;
}
header h1 {
  margin: 0;
  font-size: 24px;
}
button {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 20px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.3s;
}
button:hover {
  opacity: 0.85;
  transform: scale(1.05);
}
.container {
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 20px;
}
.card {
  background: var(--card);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 0 15px rgba(0,0,0,0.4);
  transition: 0.3s;
}
.card:hover {
  transform: translateY(-3px);
}
.chart-container {
  position: relative;
  height: 250px;
}
.comment {
  background: #21252b;
  border-left: 5px solid var(--accent);
  padding: 10px;
  border-radius: 8px;
  margin-top: 10px;
  font-size: 14px;
  line-height: 1.5;
}
footer {
  text-align: center;
  padding: 20px;
  color: #bbb;
  font-size: 13px;
}
</style>
</head>
<body>
<header>
  <h1>لوحة القيادة الذكية</h1>
  <div>
    <button onclick="goHome()">الصفحة الرئيسية</button>
    <button onclick="switchLang()">🌐 تبديل اللغة</button>
  </div>
</header>

<div class="container">
  <div class="card">
    <h2 id="title-profit">صافي الربح والتحليل الذكي</h2>
    <div class="chart-container"><canvas id="profitChart"></canvas></div>
    <div class="comment" id="profitComment"></div>
  </div>

  <div class="card">
    <h2 id="title-ratios">المؤشرات المالية الرئيسية</h2>
    <div class="chart-container"><canvas id="ratioChart"></canvas></div>
    <div class="comment" id="ratioComment"></div>
  </div>

  <div class="card">
    <h2 id="title-risk">تحليل العائد والمخاطرة</h2>
    <div class="chart-container"><canvas id="riskChart"></canvas></div>
    <div class="comment" id="riskComment"></div>
  </div>
</div>

<footer>
  © 2025 Financial Analyzer | جميع الحقوق محفوظة
</footer>

<script>
// ========== اللغة ==========
let lang = localStorage.getItem('lang') || 'ar';
function switchLang() {
  lang = lang === 'ar' ? 'en' : 'ar';
  localStorage.setItem('lang', lang);
  location.reload();
}

// ========== محاكاة البيانات ==========
const dataReport = JSON.parse(localStorage.getItem('reportData')) || { netProfit: 850000, revenue: 1200000, assets: 2000000 };
const dataAdvanced = JSON.parse(localStorage.getItem('advancedData')) || { roi: 0.18, roa: 0.12, risk: 0.07 };

// ========== ترجمة ==========
const texts = {
  ar: {
    titleProfit: "صافي الربح والتحليل الذكي",
    titleRatios: "المؤشرات المالية الرئيسية",
    titleRisk: "تحليل العائد والمخاطرة",
    home: "الصفحة الرئيسية",
    commentHigh: "الأداء ممتاز! يشير إلى نمو صحي وربحية قوية.",
    commentMid: "الأداء جيد ولكن يحتاج إلى تحسين كفاءة التكاليف.",
    commentLow: "الربحية منخفضة وتحتاج إلى مراجعة السياسات التشغيلية."
  },
  en: {
    titleProfit: "Net Profit & Smart Analysis",
    titleRatios: "Key Financial Ratios",
    titleRisk: "Return & Risk Analysis",
    home: "Home",
    commentHigh: "Excellent performance with strong profitability.",
    commentMid: "Good performance but cost efficiency can improve.",
    commentLow: "Low profitability. Review operational policies."
  }
};
document.getElementById('title-profit').textContent = texts[lang].titleProfit;
document.getElementById('title-ratios').textContent = texts[lang].titleRatios;
document.getElementById('title-risk').textContent = texts[lang].titleRisk;

// ========== دوال ==========
function goHome(){ window.location.href = "index.html"; }

function comment(value){
  if(value > 0.15) return texts[lang].commentHigh;
  else if(value > 0.07) return texts[lang].commentMid;
  else return texts[lang].commentLow;
}

// ========== الرسم البياني ==========
new Chart(document.getElementById('profitChart'), {
  type: 'bar',
  data: {
    labels: [lang === 'ar' ? 'الإيرادات' : 'Revenue', lang === 'ar' ? 'صافي الربح' : 'Net Profit'],
    datasets: [{
      data: [dataReport.revenue, dataReport.netProfit],
      backgroundColor: ['#00bcd4', '#4caf50']
    }]
  },
  options: { responsive: true, plugins: { legend: { display: false } } }
});

document.getElementById('profitComment').textContent = comment(dataReport.netProfit / dataReport.revenue);

new Chart(document.getElementById('ratioChart'), {
  type: 'doughnut',
  data: {
    labels: ['ROI', 'ROA', 'Margin'],
    datasets: [{
      data: [dataAdvanced.roi, dataAdvanced.roa, dataReport.netProfit / dataReport.revenue],
      backgroundColor: ['#ff9800', '#2196f3', '#8bc34a']
    }]
  },
  options: { responsive: true }
});

document.getElementById('ratioComment').textContent = comment((dataAdvanced.roi + dataAdvanced.roa) / 2);

new Chart(document.getElementById('riskChart'), {
  type: 'line',
  data: {
    labels: ['2023', '2024', '2025'],
    datasets: [{
      label: lang === 'ar' ? 'العائد المتوقع' : 'Expected Return',
      data: [0.12, 0.15, 0.18],
      borderColor: '#00bcd4',
      tension: 0.4
    },{
      label: lang === 'ar' ? 'المخاطرة' : 'Risk',
      data: [0.08, 0.07, dataAdvanced.risk],
      borderColor: '#f44336',
      tension: 0.4
    }]
  },
  options: { responsive: true }
});

document.getElementById('riskComment').textContent = dataAdvanced.risk < 0.1 ?
 (lang === 'ar' ? "مستوى المخاطرة مقبول والأداء مستقر." : "Risk level is acceptable and performance stable.") :
 (lang === 'ar' ? "مستوى المخاطرة مرتفع نسبيًا ويحتاج للانتباه." : "Risk level is high and needs attention.");

</script>
</body>
</html>
